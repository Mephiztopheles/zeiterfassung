<div class="">
  <div class="row">
    <div class="col-md-3">
      <button class="form-control" (click)="create()">Neu</button>
    </div>
  </div>
  <div class="form-inline">
    <div class="form-group">
      <label for="filter-id" class="lbl">#:</label>
      <input id="filter-id" type="number" class="form-control" min="1" (input)="setFilter()" [(ngModel)]="filter.id">
    </div>
    <div class="form-group">
      <label class="lbl" for="project-select">Projekt:</label>
      <select id="project-select" class="form-control" (change)="setFilter()" [(ngModel)]="filter.projekt">
        <option [ngValue]="null">Keine</option>
        <option *ngFor="let p of projects" [ngValue]="p">{{p.name}}</option>
      </select>
    </div>
    <div class="form-group">
      <label class="lbl" for="filter-von">von:</label>
      <input type="date" id="filter-von" class="form-control" (input)="setFilter()" [(ngModel)]="filter.start">
    </div>
    <div class="form-group">
      <label class="lbl" for="filter-bis">bis:</label>
      <input type="date" id="filter-bis" class="form-control" (input)="setFilter()" [(ngModel)]="filter.ende">
    </div>
  </div>
</div>

<div class="">
  <table class="table table-hover table-striped table-inverse table-bordered">
    <thead class="thead-inverse">
      <tr>
        <th>#</th>
        <th>Titel</th>
        <th>Beschreibung</th>
        <th>Zeit</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr class="hoverable" *ngFor="let eintrag of stundenZettelGefiltert">
        <th>{{eintrag.id}}</th>
        <td>{{eintrag.titel}}</td>
        <td>
          <pre>{{eintrag.beschreibung}}</pre>
        </td>
        <td>{{eintrag.dauer|dauer}}</td>
        <td>
          <button class="btn btn-primary" (click)="edit(eintrag)">Bearbeiten</button>
        </td>
      </tr>
      <tr>
        <td colspan="3" class="text-right">Summe</td>
        <td colspan="2"><b><u>{{gesamtDauer|dauer}}</u></b></td>
      </tr>
    </tbody>
  </table>
</div>


<div id="popup" *ngIf="entry">
  <div id="popup-inner">
    <div class="card bg-light border-dark">
      <div class="card-header">{{current ? current.titel + " bearbeiten" : "Neuer Eintrag"}}</div>
      <div class="card-body">
        <div class="form card-text">
          <div class="form-group">
            <label for="entry-titel">Titel</label>
            <input id="entry-titel" type="text" class="form-control" [(ngModel)]="entry.titel">
          </div>
          <div class="form-group">
            <label for="entry-beschreibung">Beschreibung</label>
            <textarea id="entry-beschreibung" class="form-control" [(ngModel)]="entry.beschreibung" rows="10"></textarea>
          </div>
          <div class="form-group">
            <!--suppress XmlInvalidId -->
            <label for="entry-von">Start</label>
            <owl-date-time [inputId]="'entry-von'" [(ngModel)]="entry.start" [locale]="_de" [placeHolder]="'dd.mm.yyyy'" dateFormat="DD.MM.YYYY HH:mm"></owl-date-time>
          </div>
          <div class="form-group">
            <!--suppress XmlInvalidId -->
            <label for="entry-bis">Ende</label>
            <owl-date-time [inputId]="'entry-bis'" [type]="'timer'" [(ngModel)]="entry.ende" [min]="entry.start" [locale]="_de" [placeHolder]="'HH:mm'" dateFormat="HH:mm"></owl-date-time>
          </div>
          <button class="btn btn-success" (click)="save()">Speichern</button>
          <button class="btn btn-dark float-right" (click)="cancel()">Abbrechen</button>
        </div>
      </div>
    </div>
  </div>
</div>
